---
import Layout from '../../layouts/Layout.astro';
import Hero from '../../components/Hero.astro';
import About from '../../components/About.astro';
import Skills from '../../components/Skills.astro';
import Projects from '../../components/Projects.astro';
import Contact from '../../components/Contact.astro';
import { getLangFromUrl, useTranslations } from '../../i18n';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Centralized resume data import (SSR/HMR optimization)
const resumeData = lang === 'es' 
  ? await import('../../../resume_es.json')
  : await import('../../../resume_en.json');

const { basics, education, certificates, languages, skills, projects } = resumeData.default;
---

<Layout title={`${t('nav.home')} - Oscar David Valencia`}>
  <Hero basics={basics} />
  <About 
    basics={basics} 
    education={education} 
    certificates={certificates} 
    languages={languages} 
  />
  <Projects projects={projects} />
  <Skills skills={skills} />
  <Contact basics={basics} />
</Layout>